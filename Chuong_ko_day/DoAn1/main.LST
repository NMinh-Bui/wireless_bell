C51 COMPILER V9.01   MAIN                                                                  06/14/2020 21:19:47 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include"main.h"
   2          #include"port.h"
   3          #include"..\Lib\Delay.h"
   4          #include"..\Lib\Lcd.h"
   5          
   6          // Khai bao bien toan cuc 
   7          unsigned char i = 0;
   8          unsigned char num[12];
   9          
  10          void main()
  11          {
  12   1              // Khai bao bien chi su dung trong ham main 
  13   1              unsigned char cnt ;
  14   1              
  15   1              LCD_RW = 0 ;
  16   1              P2_4 = 0 ;
  17   1              P2_5 = 0 ;
  18   1              P2_6 = 0 ;
  19   1              P2_7 = 0 ;
  20   1      
  21   1              // cau hinh ngat ngoai INT1 , INT0  
  22   1              IT1 = 1 ; // Cho phep ngat canh xuong INT1 
  23   1              EX1 = 1 ; // Cho phep ngat ngoai INT1 
  24   1              IT0 = 1 ; // Cho phep ngat canh xuong INT0
  25   1              EX0 = 1 ; // Cho phep ngat ngoai INT0
  26   1              PX0 = 1 ; // Gan muc uu tien cao cho ngat ngoai 0
  27   1              EA = 1 ; // Cho phep ngat toan cuc 
  28   1      
  29   1      
  30   1              // Khoi tao gia tri ban dau cho num[]
  31   1              for( cnt = 0 ; cnt < 12 ; cnt++ )
  32   1              {
  33   2                      num[cnt] = 0 ; 
  34   2              }
  35   1      
  36   1              while(1)
  37   1              {
  38   2              Display(num[0]);
  39   2              Buz = 0 ;
  40   2              Delay_ms(1000); 
  41   2              Buz = 1 ;
  42   2              PCON |= 0x01 ; 
  43   2              } 
  44   1              return ; 
  45   1      
  46   1      }
  47          
  48          void ISR_EX1 (void) interrupt 0  // Chuong trinh phuc vu ngat EX0 
  49          {
  50   1              unsigned char j = 0 ;
  51   1              while(num[j] != P2 )
  52   1              {
  53   2                      if(i == j)
  54   2                      {
  55   3                              num[i] = P2 ; // co the optimize 
C51 COMPILER V9.01   MAIN                                                                  06/14/2020 21:19:47 PAGE 2   

  56   3                              i = i + 1 ;
  57   3                              break ;
  58   3                      }
  59   2                      else
  60   2                      {
  61   3                              j = j + 1 ;
  62   3                      }
  63   2              }       
  64   1              return ;        
  65   1      }
  66          
  67          void ISR_EX0 (void) interrupt 2  // Chuong trinh ngat phuc vu EX1 
  68          {
  69   1              // Khoi tao bien
  70   1              unsigned char j , KiemTra = 0  ;
  71   1              Delay_ms(20);
  72   1              if(BTN == 0)
  73   1              {
  74   2                      j = 0 ;
  75   2                      while(num[j] != 0)
  76   2                      {
  77   3                              KiemTra = 1 ; 
  78   3                              num[j] = num[j +1];
  79   3                              j = j + 1 ;
  80   3                              if(j == 11)
  81   3                              {
  82   4                                      num[j] = 0 ;
  83   4                                      break ;  
  84   4                              }
  85   3                      }
  86   2                      if(KiemTra == 1 )
  87   2                      {
  88   3                              i = i - 1 ; 
  89   3                      }               
  90   2              }       
  91   1              return ; 
  92   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    210    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     13       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
